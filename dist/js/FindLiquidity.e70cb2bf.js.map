{"version":3,"sources":["webpack:///./src/views/liquidity/Find.vue?1670","webpack:///./src/views/liquidity/Find.vue","webpack:///./src/views/liquidity/Find.vue?06f2"],"names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_el_card","_component_router_link","to","name","_component_el_button","icon","$setup","circle","_hoisted_2","_hoisted_3","_component_SelectTokenButton","onSelectToken","token","tokenA","pairToken","tokenB","_hoisted_4","_hoisted_5","searchState","_hoisted_6","_hoisted_7","poolData","_hoisted_8","_component_LiquidityCardPreview","pair","_hoisted_9","onClick","type","plain","_hoisted_12","_hoisted_13","_hoisted_14","components","SelectTokenButton","LiquidityCardPreview","setup","Web3Connect","useWeb3Connnect","chainId","ParseSdkEntity","useParseSdkEntity","ERC20","useERC20","Pair","usePair","account","computed","store","state","router","useRouter","data","reactive","selectTokenAHandle","value","loadPoolData","selectTokenBHandle","wrappedCurrency","liquidityToken","toLiquidityToken","balanceOf","address","balance","parseInt","pairBalance","createTokenAmount","getPair","pairEntity","tokens","console","log","message","goAddLiquidity","push","addPair","dispatch","Back","__exports__","render"],"mappings":"iHAAA,W,uLCCSA,MAAM,Q,uBAKHC,gCAAmE,MAA/DC,MAAA,+CAA+C,eAAW,M,uBAC9DD,gCAAqG,MAAjGD,MAAM,UAAUE,MAAA,mDAAqD,2BAAuB,M,uBAIhGD,gCAEM,OAFDC,MAAA,yBAA4B,OAEjC,M,uBAIAD,gCAAI,sB,qDAQQA,gCAAI,sB,GACCC,MAAA,yB,+BACgD,oB,iCAIrDD,gCAEM,WAFD,gDAEL,M,uBACAA,gCAAI,sB,+BAEwD,iB,gTAnChFE,gCAyCM,MAzCN,EAyCM,CAxCFC,yBAuCUC,EAAA,CAvCDL,MAAM,YAAU,C,8BACrB,iBAEc,CAFdI,yBAEcE,EAAA,CAFAC,GAAI,CAAAC,mBAAmB,C,8BACjC,iBAA2C,CAA3CJ,yBAA2CK,EAAA,CAA/BC,KAAMC,OAAMC,OAAA,IAAxB,qB,MAEJC,EACAC,EACAb,gCAEM,YADFG,yBAAuHW,EAAA,CAAnGC,cAAaL,qBAAqBM,MAAON,OAAKO,OAASC,UAAWR,OAAKS,QAA3F,gDAEJC,EAGApB,gCAEM,YADFG,yBAAuHW,EAAA,CAAnGC,cAAaL,qBAAqBM,MAAON,OAAKS,OAASD,UAAWR,OAAKO,QAA3F,gDAEJI,EACArB,gCAsBM,YArByB,YAAhBU,OAAKY,aAAW,yBAA3BpB,gCAEM,MAAAqB,EAFqC,iBAGX,SAAhBb,OAAKY,aAAW,yBAAhCpB,gCAiBM,MAAAsB,EAAA,CAhBSd,OAAKe,mCAAhBvB,gCAMM,MAAAwB,EAAA,CALFvB,yBAAmEwB,EAAA,CAA5CC,KAAMlB,OAAKe,UAAlC,iBACAI,EACA7B,gCAEM,MAFN,EAEM,CADFG,yBAA6EK,EAAA,CAAjEsB,QAAOpB,UAASqB,KAAK,UAAUC,MAAA,IAA3C,C,8BAAiD,iBAAgB,O,KAAjE,qBAJR,yBAOA9B,gCAQM,MAAA+B,EAAA,CAPFC,EAGAC,EACAnC,gCAEM,YADFG,yBAAiFK,EAAA,CAArEsB,QAAOpB,iBAAgBqB,KAAK,UAAUC,MAAA,IAAlD,C,8BAAwD,iBAAa,O,KAArE,uBAdZ,6C,4JAoCD,GACXI,WAAY,CACRC,yBACAC,6BAEJC,MALW,WAOP,IAAMC,EAAcC,iBACdC,EAAUF,EAAYE,QACtBC,EAAiBC,iBACjBC,EAAQC,iBACRC,EAAOC,iBACPC,EAAUC,uBAAS,WACrB,OAAOC,OAAMC,MAAMH,WAEjBI,EAASC,iBAETC,EAAOC,sBAAS,CAClBvC,OAAQ,KACRE,OAAQ,KACRM,SAAU,KACVH,YAAa,SAGXmC,EAAqB,SAACC,GACxBH,EAAKtC,OAASyC,EACdC,KAEEC,EAAqB,SAACF,GACxBH,EAAKpC,OAASuC,EACdC,KAGEA,EAAW,uDAAI,+GAEbJ,EAAKtC,QAAWsC,EAAKpC,OAFR,wDAMXF,EAAS4C,eAAgBN,EAAKtC,OAAQyB,EAAQgB,OAC9CvC,EAAS0C,eAAgBN,EAAKpC,OAAQuB,EAAQgB,OAEpDH,EAAKjC,YAAc,UATF,SAaPwC,EAAiBnB,EAAeoB,iBAAiB9C,EAAQE,GAblD,SAcS0B,EAAMmB,UAAUF,EAAeG,QAAShB,EAAQS,MAAMO,SAd/D,UAcPC,EAdO,SAeVC,SAASD,GAAW,GAfV,wBAgBHE,EAAczB,EAAe0B,kBAAkBP,EAAgBI,GAhB5D,UAiBiBnB,EAAKuB,QAAQrD,EAAQE,GAjBtC,QAiBHoD,EAjBG,OAiB+C,GACxDhB,EAAK9B,SAAW,CACZ+C,OAAQ,CACJvD,EACAE,GAEJ2C,iBACAM,cACAG,cAzBK,wBA4BThB,EAAK9B,SAAW,KA5BP,6DAgCbgD,QAAQC,IAAI,qBAAsB,KAAMC,SACxCpB,EAAK9B,SAAW,KAjCH,QAmCjB8B,EAAKjC,YAAc,OAnCF,0DAAJ,qDAsCXsD,EAAiB,WACnBvB,EAAOwB,KAAK,CAACtE,KAAM,kBAGjBuE,EAAU,WAEZ,IAAM7D,EAAS4C,eAAgBN,EAAKtC,OAAQyB,EAAQgB,OAC9CvC,EAAS0C,eAAgBN,EAAKpC,OAAQuB,EAAQgB,OAEpDP,OAAM4B,SAAS,mBAAoB,CAAC9D,EAAQE,IAC5CkC,EAAOwB,KAAK,CAACtE,KAAM,eAGvB,MAAO,CACHyE,YACAzB,OACAE,qBACAG,qBACAgB,iBACAE,a,iCC7IZ,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"js/FindLiquidity.e70cb2bf.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Find.vue?vue&type=style&index=0&id=2b20d344&scoped=true&lang=css\"","<template>\n    <div class=\"Find\">\n        <el-card class=\"card-fix\">\n            <router-link :to=\"{name: 'Liquidity'}\">\n                <el-button :icon=\"Back\" circle></el-button>\n            </router-link>\n            <h2 style=\"margin-bottom: 0px;text-align: center;\">Import Pool</h2>\n            <h3 class=\"text-sm\" style=\"text-align: center;margin: 0px 0px 15px 0px;\">Import an existing pool</h3>\n            <div>\n                <SelectTokenButton @selectToken=\"selectTokenAHandle\" :token=\"data.tokenA\" :pairToken=\"data.tokenB\"></SelectTokenButton>\n            </div>\n            <div style=\"text-align: center;\">\n                +\n            </div>\n            <div>\n                <SelectTokenButton @selectToken=\"selectTokenBHandle\" :token=\"data.tokenB\" :pairToken=\"data.tokenA\"></SelectTokenButton>\n            </div>\n            <br>\n            <div>\n                <div v-if=\"data.searchState === 'loading'\">\n                    Loading...\n                </div>\n                <div v-else-if=\"data.searchState === 'done'\">\n                    <div v-if=\"data.poolData\">\n                        <LiquidityCardPreview :pair=\"data.poolData\"></LiquidityCardPreview>\n                        <br>\n                        <div style=\"text-align: center;\">\n                            <el-button @click=\"addPair\" type=\"primary\" plain>Manage this pool</el-button>\n                        </div>\n                    </div>\n                    <div v-else>\n                        <div>\n                            You donâ€™t have liquidity in this pool yet.\n                        </div>\n                        <br>\n                        <div>\n                            <el-button @click=\"goAddLiquidity\" type=\"primary\" plain>Add Liquidity</el-button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </el-card>\n    </div>\n</template>\n<script>\n\nimport { Back } from '@element-plus/icons-vue'\nimport SelectTokenButton from '@/components/SelectTokenButton'\nimport { reactive, computed } from 'vue'\nimport useParseSdkEntity from '@/use/ParseSdkEntity'\nimport store from '@/store'\nimport useERC20 from '@/use/ERC20.js'\nimport usePair from '@/use/Pair'\nimport LiquidityCardPreview from '@/components/LiquidityCardPreview'\nimport { useRouter } from 'vue-router'\nimport { wrappedCurrency } from '@/utils/wrappedCurrency'\nimport useWeb3Connnect from '@/use/Web3Connect.js'\n\nexport default {\n    components: {\n        SelectTokenButton,\n        LiquidityCardPreview,\n    },\n    setup() {\n\n        const Web3Connect = useWeb3Connnect()\n        const chainId = Web3Connect.chainId\n        const ParseSdkEntity = useParseSdkEntity()\n        const ERC20 = useERC20()\n        const Pair = usePair()\n        const account = computed(() => {\n            return store.state.account\n        })\n        const router = useRouter()\n\n        const data = reactive({\n            tokenA: null,\n            tokenB: null,\n            poolData: null,\n            searchState: 'idle', //idle, loading, done\n        })\n\n        const selectTokenAHandle = (value) => {\n            data.tokenA = value\n            loadPoolData()\n        }\n        const selectTokenBHandle = (value) => {\n            data.tokenB = value\n            loadPoolData()\n        }\n\n        const loadPoolData = async () => {\n\n            if(!data.tokenA || !data.tokenB) {\n                return\n            }\n\n            const tokenA = wrappedCurrency(data.tokenA, chainId.value)\n            const tokenB = wrappedCurrency(data.tokenB, chainId.value)\n\n            data.searchState = 'loading'\n\n            try {\n\n                const liquidityToken = ParseSdkEntity.toLiquidityToken(tokenA, tokenB)\n                const balance = await ERC20.balanceOf(liquidityToken.address, account.value.address)\n                if(parseInt(balance) > 0) {\n                    const pairBalance = ParseSdkEntity.createTokenAmount(liquidityToken, balance)\n                    const pairEntity = (await Pair.getPair(tokenA, tokenB))[1]\n                    data.poolData = {\n                        tokens: [\n                            tokenA,\n                            tokenB,\n                        ],\n                        liquidityToken,\n                        pairBalance, \n                        pairEntity\n                    }\n                } else {\n                    data.poolData = null\n                }\n\n            } catch (error) {\n                console.log('loadPoolData error', error.message)\n                data.poolData = null\n            }\n            data.searchState = 'done'\n        }\n\n        const goAddLiquidity = () => {\n            router.push({name: 'AddLiquidity'})\n        }\n\n        const addPair = () => {\n\n            const tokenA = wrappedCurrency(data.tokenA, chainId.value)\n            const tokenB = wrappedCurrency(data.tokenB, chainId.value)\n\n            store.dispatch('addUserSavePairs', [tokenA, tokenB])\n            router.push({name: 'Liquidity'})\n        }\n\n        return {\n            Back,\n            data,\n            selectTokenAHandle,\n            selectTokenBHandle,\n            goAddLiquidity,\n            addPair,\n        }\n    }\n}\n</script>\n<style scoped>\n.Find {\n    display: flex;\n    justify-content: center;\n}\n</style>\n","import { render } from \"./Find.vue?vue&type=template&id=2b20d344&scoped=true\"\nimport script from \"./Find.vue?vue&type=script&lang=js\"\nexport * from \"./Find.vue?vue&type=script&lang=js\"\n\nimport \"./Find.vue?vue&type=style&index=0&id=2b20d344&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/mana/ethereum/bnb-chain/bird-swap/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b20d344\"]])\n\nexport default __exports__"],"sourceRoot":""}